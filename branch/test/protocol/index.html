<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Events Query with Linked Data</title>
  <meta content="UD" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-UD" rel="stylesheet">
  <meta content="Bikeshed version 9a7a6709a, updated Tue May 27 16:45:34 2025 -0700" name="generator">
  <link href="https://cxres.github.io/eq-ld/protocol" rel="canonical">
  <meta content="cdea459d8d3edaffaffd18700570484d06612906" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
  .example .sub-example {
    margin-top: 12px;
  }

  .example .sub-example pre {
    margin-top: 4px;
  }

  .example .include-code~p {
    margin-top: 20px;
    margin-bottom: 4px;
  }
</style>
<style>
main {
  counter-reset: tables;
}

table {
  width: 90%;
  border: 6px double black;
  table-layout: fixed;
  border-collapse: collapse;
  margin: 0 4px;
}

table.auto {
  table-layout: auto;
}

table > caption {
  padding-bottom: 8px;
}

table.numbered {
  contain: none;
  counter-increment: tables;
}

table.numbered > caption::before {
  content: "Table " counter(tables) ": ";
  font-weight: 700;
  padding: 2px 0;
}

th, td {
  border: 2px solid;
  padding: 4px 8px;
  vertical-align: top;
}

th.center {
  text-align: center;
  width: fit-content;
}

td.tick {
  text-align: center;
  vertical-align: middle;
  font-weight: 800;
}

@media (prefers-color-scheme: dark) {
  table {
    border-color: white;
  }
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-line-highlighting */
:root {
    --highlight-hover-bg: rgba(0, 0, 0, .05);
}
.line-numbered {
    display: grid !important;
    grid-template-columns: min-content 1fr;
    grid-auto-flow: row;
}
.line-numbered > *,
.line-numbered::before,
.line-numbered::after {
    grid-column: 1/-1;
}
.line-no {
    grid-column: 1;
    color: gray;
}
.line {
    grid-column: 2;
}
.line.highlight-line {
    background: var(--highlight-hover-bg);
}
.line-no.highlight-line {
    background: var(--highlight-hover-bg);
    color: #444;
    font-weight: bold;
}
.line-no.highlight-line[data-line]::before {
    padding: 0 .5em 0 .1em;
    content: attr(data-line);
}
.line-no.highlight-line[data-line-end]::after {
    padding: 0 .5em 0 .1em;
    content: attr(data-line-end);
}

@media (prefers-color-scheme: dark) {
    :root {
        --highlight-hover-bg: rgba(255, 255, 255, .05);
    }
}
</style>
<style>/* Boilerplate: style-line-numbers */
:root {
    --highlight-hover-bg: rgba(0, 0, 0, .05);
}
.line-numbered {
    display: grid !important;
    grid-template-columns: min-content 1fr;
    grid-auto-flow: row;
}
.line-numbered > *,
.line-numbered::before,
.line-numbered::after {
    grid-column: 1/-1;
}
.line-no {
    grid-column: 1;
    color: gray;
}
.line {
    grid-column: 2;
}
.line:hover {
    background: var(--highlight-hover-bg);
}
.line-no[data-line]::before {
    padding: 0 .5em 0 .1em;
    content: attr(data-line);
}
.line-no[data-line-end]::after {
    padding: 0 .5em 0 .1em;
    content: attr(data-line-end);
}

@media (prefers-color-scheme: dark) {
    :root {
        --highlight-hover-bg: rgba(255, 255, 255, .05);
    }
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <h1 class="p-name no-ref" id="title">Events Query with Linked Data</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#UD">Unofficial Proposal Draft</a>, <time class="dt-updated" datetime="2025-05-28">28 May 2025</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://cxres.github.io/eq-ld/protocol">https://cxres.github.io/eq-ld/protocol</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/CxRes/eq-ld/issues/">GitHub</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://cxres.pages.dev/profile/#i">Rahul Gupta</a>
      <dt>Authors:
      <dd><a href="https://cxres.pages.dev/profile/#i">Rahul Gupta</a>
      <dt>Version:
      <dd>0.1.0
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright">Copyright © 2025, Events Query with Linked Data contributors.
This work is distributed under the <a href="https://www.w3.org/copyright/software-license-2023/" rel="license" title="W3C Document and Software license - 2023 version"><abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> Document and Software license - 2023 version</a>. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Events Query with Linked Data (EQ-LD) defines representation and semantics when using linked data to request and transmit notifications with the Events Query protocol.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p>This section describes the status of this document at the time of its publication.</p>
   <p>The information in this draft document is still subject to change. It may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p>
   <p>You are invited to contribute any feedback, comments, or questions you might have.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#intended-audience"><span class="secno">1.1</span> <span class="content">Audience</span></a>
      <li><a href="#namespaces"><span class="secno">1.2</span> <span class="content">Namespaces</span></a>
      <li><a href="#conformance"><span class="secno">1.3</span> <span class="content">Conformance</span></a>
     </ol>
    <li><a href="#discovery"><span class="secno">2</span> <span class="content">Discovery</span></a>
    <li>
     <a href="#request"><span class="secno">3</span> <span class="content">Request</span></a>
     <ol class="toc">
      <li><a href="#request-data-model"><span class="secno">3.1</span> <span class="content">Data Model</span></a>
      <li><a href="#request-vocabulary"><span class="secno">3.2</span> <span class="content">Vocabulary</span></a>
      <li><a href="#extended-request-content"><span class="secno">3.3</span> <span class="content">Extended Content</span></a>
      <li><a href="#request-format"><span class="secno">3.4</span> <span class="content">Format</span></a>
     </ol>
    <li>
     <a href="#notification"><span class="secno">4</span> <span class="content">Notification</span></a>
     <ol class="toc">
      <li><a href="#notification-data-model"><span class="secno">4.1</span> <span class="content">Data Model</span></a>
      <li><a href="#notification-vocabulary"><span class="secno">4.2</span> <span class="content">Vocabulary</span></a>
      <li><a href="#activity-mapping"><span class="secno">4.3</span> <span class="content">Activity Mapping</span></a>
      <li><a href="#extended-notification-content"><span class="secno">4.4</span> <span class="content">Extended Content</span></a>
      <li><a href="#notification-format"><span class="secno">4.5</span> <span class="content">Format</span></a>
     </ol>
    <li>
     <a href="#considerations"><span class="secno"></span> <span class="content"> Considerations </span></a>
     <ol class="toc">
      <li><a href="#security-considerations"><span class="secno"></span> <span class="content">Security Considerations</span></a>
     </ol>
    <li><a href="#example"><span class="secno"></span> <span class="content"> Example </span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p><span class="super">Events Query</span> <a data-link-type="biblio" href="#biblio-events-query" title="HTTP Events Query">[EVENTS-QUERY]</a> is a minimal event notifications protocol built on top of HTTP. <span class="title">Events Query with Linked Data</span> (EQ-LD) defines representation and semantics for using linked data to request and transmit event notifications directly from HTTP resources with the <span class="super">Events Query</span> protocol.</p>
   <h3 class="heading settled" data-level="1.1" id="intended-audience"><span class="secno">1.1. </span><span class="content">Audience</span><a class="self-link" href="#intended-audience"></a></h3>
   <p><em>This section is non-normative.</em></p>
   <p>This specification is for:</p>
   <ul>
    <li data-md>
     <p><a href="http://data.europa.eu/esco/occupation/a7c1d23d-aeca-4bee-9a08-5993ed98b135">Server developers</a> who wish to enable clients to listen for updates to HTTP resources.</p>
    <li data-md>
     <p><a href="http://data.europa.eu/esco/occupation/c40a2919-48a9-40ea-b506-1f34f693496d">Application developers</a> who wish to implement a client to listen for updates to HTTP resources.</p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="namespaces"><span class="secno">1.2. </span><span class="content">Namespaces</span><a class="self-link" href="#namespaces"></a></h3>
   <p>This specification uses the following RDF vocabularies and corresponding namespace prefix bindings:</p>
   <table class="auto">
    <caption> Prefixes and Namespaces </caption>
    <thead>
     <tr>
      <th> Prefix 
      <th> Namespace 
      <th> Description 
    <tbody>
     <tr>
      <td> <code class="highlight">eq-ld</code> 
      <td> <samp>http://cxres.github.io/eq-ld/ns/eq.ttl#</samp> 
      <td> <span class="title">Events Query with Linked Data</span> 
     <tr>
      <td> <code class="highlight">as</code> 
      <td> <samp>https://www.w3.org/ns/activitystreams#</samp> 
      <td> <a data-link-type="biblio" href="#biblio-activitystreams-vocabulary" title="Activity Vocabulary">[ACTIVITYSTREAMS-VOCABULARY]</a> 
     <tr>
      <td> <code class="highlight">http</code> 
      <td> <samp>http://www.w3.org/2011/http#</samp> 
      <td> <a data-link-type="biblio" href="#biblio-http-in-rdf10" title="HTTP Vocabulary in RDF 1.0">[HTTP-in-RDF10]</a> 
     <tr>
      <td> <code class="highlight">xs</code> 
      <td> <samp>http://www.w3.org/2001/XMLSchema#</samp> 
      <td> <a data-link-type="biblio" href="#biblio-xmlschema11-1" title="W3C XML Schema Definition Language (XSD) 1.1 Part 1: Structures">[XMLSCHEMA11-1]</a> 
   </table>
   <h3 class="heading settled" data-level="1.3" id="conformance"><span class="secno">1.3. </span><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h3>
   <h4 class="heading settled" data-level="1.3.1" id="document-conventions"><span class="secno">1.3.1. </span><span class="content">Document Conventions</span><a class="self-link" href="#document-conventions"></a></h4>
   <p>All of the text of this specification is normative except assertions, diagrams, examples, notes and sections explicitly marked as non-normative as described in <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>.</p>
   <p>The key words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT" and "MAY" in this document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> <a data-link-type="biblio" href="#biblio-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.</p>
   <p>The above-mentioned keywords are used exclusively in the normative parts of this document and appear only in all capitals.</p>
   <h4 class="heading settled" data-level="1.3.2" id="specification-category"><span class="secno">1.3.2. </span><span class="content">Specification Category</span><a class="self-link" href="#specification-category"></a></h4>
   <p>The <span class="title">Events Query with Linked Data</span> identifies the following <a href="https://www.w3.org/TR/spec-variability/#spec-cat">Specification Categories</a> <a data-link-type="biblio" href="#biblio-spec-variability" title="Variability in Specifications">[SPEC-VARIABILITY]</a> to distinguish the types of conformance:</p>
   <ul>
    <li data-md>
     <p>API,</p>
    <li data-md>
     <p>Notation/syntax,</p>
    <li data-md>
     <p>Set of events,</p>
    <li data-md>
     <p>Protocol.</p>
   </ul>
   <h4 class="heading settled" data-level="1.3.3" id="classes-of-products"><span class="secno">1.3.3. </span><span class="content">Classes of Products</span><a class="self-link" href="#classes-of-products"></a></h4>
   <p>The <span class="title">Events Query with Linked Data</span> identifies the following <a href="https://www.w3.org/TR/spec-variability/#cop">Classes of Products</a> <a data-link-type="biblio" href="#biblio-spec-variability" title="Variability in Specifications">[SPEC-VARIABILITY]</a> for conforming implementations. These products are referenced throughout this specification.</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="server">Server</dfn>
    <dd data-md>
     <p>A <em>server</em> that builds on HTTP server <a data-link-type="biblio" href="#biblio-rfc9110" title="HTTP Semantics">[RFC9110]</a> and <a data-link-type="biblio" href="#biblio-rfc9112" title="HTTP/1.1">[RFC9112]</a> by defining methods,media types and behaviour of resources.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="client">Client</dfn>
    <dd data-md>
     <p>A <em>client</em> that builds on a HTTP client <a data-link-type="biblio" href="#biblio-rfc9110" title="HTTP Semantics">[RFC9110]</a>, <a data-link-type="biblio" href="#biblio-rfc9112" title="HTTP/1.1">[RFC9112]</a> and <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a> by defining behaviour in terms of fetching across the platform.</p>
   </dl>
   <h4 class="heading settled" data-level="1.3.4" id="interoperability"><span class="secno">1.3.4. </span><span class="content">Interoperability</span><a class="self-link" href="#interoperability"></a></h4>
   <p>Interoperability occurs between <a href="#client-server-interoperability" id="ref-for-client-server-interoperability">Client—Server</a> as defined by <span class="title">Events Query with Linked Data</span>.</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="client-server-interoperability">Client—Server Interoperability</dfn>
    <dd data-md>
     <p>Interoperability of implementations for <a data-link-type="dfn" href="#client" id="ref-for-client">clients</a> and <a data-link-type="dfn" href="#server" id="ref-for-server">servers</a> is tested by evaluating an implementation’s ability to transmit and receive event notifications that conform to <span class="title">Events Query with Linked Data</span>.</p>
   </dl>
   <h2 class="heading settled" data-level="2" id="discovery"><span class="secno">2. </span><span class="content">Discovery</span><a class="self-link" href="#discovery"></a></h2>
   <p>A <a data-link-type="dfn" href="#client" id="ref-for-client①">client</a> can discover support for event notifications using <span class="title">Events Query with Linked Data</span> by examining if a <a data-link-type="dfn" href="#server" id="ref-for-server①">server</a> is able to accept a query request on a resource using a suitable RDF serialization with content consistent with the <a href="#request-format">Request Format</a>.</p>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server②">server</a> that provides event notifications using <span class="title">Events Query with Linked Data</span> on a resource MUST advertize <code class="highlight">application/ld+json</code> <a data-link-type="biblio" href="#biblio-json-ld11" title="JSON-LD 1.1">[JSON-LD11]</a> as an acceptable representation for a request with the <code class="highlight"><a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html#name-query">QUERY</a></code> method (<a data-link-type="biblio" href="#biblio-http-query" title="The HTTP QUERY Method">[HTTP-QUERY]</a>), using the <code class="highlight"><a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html#name-accept-query">Accept-Query</a></code> (<a data-link-type="biblio" href="#biblio-http-query" title="The HTTP QUERY Method">[HTTP-QUERY]</a> <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html#name-accept-query">§ 3</a>) header field of a response.
A <a data-link-type="dfn" href="#server" id="ref-for-server③">server</a> MUST further set the value of the <code class="highlight">profile</code> parameter of the <code class="highlight">application/ld+json</code> media type to indicate a preferred JSON-LD context <code class="highlight">http://www.w3.org/ns/json-ld#context</code> with <code class="highlight">http://cxres.github.io/eq-ld/ns/context.jsonld</code> as the URI.</p>
   <div class="example" id="example-082f34da">
    <a class="self-link" href="#example-082f34da"></a> <span class="marker">Discovery Request and Response</span> 
    <div class="sub-example">
      <em>Request</em> 
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"><c- nf>HEAD</c-> <c- nn>/missing/John_Doe</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-></span><span class="line-no highlight-line" data-line="2"></span><span class="line highlight-line"><c- e>Host</c-><c- o>:</c-> <c- l>example.org</c-></span></pre>
    </div>
    <div class="sub-example">
      <em>Response</em> 
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="2"></span><span class="line"><c- e>Accept-Query</c-><c- o>:</c-> <c- l>application/ld+json;</c-></span><span class="line-no" data-line="3"></span><span class="line">  <c- l>profile="http://www.w3.org/ns/json-ld#context http://cxres.github.io/eq-ld/ns/context.jsonld"</c-></span></pre>
    </div>
   </div>
   <h2 class="heading settled" data-level="3" id="request"><span class="secno">3. </span><span class="content">Request</span><a class="self-link" href="#request"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="request-data-model"><span class="secno">3.1. </span><span class="content">Data Model</span><a class="self-link" href="#request-data-model"></a></h3>
   <p>A request for event notifications using the <span class="title">Events Query with Linked Data</span> builds on the abstract <a href="https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html#data-model">data model</a> defined by the <a data-biblio-display="inline" data-link-type="biblio" href="https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html"><cite>HTTP Events Query</cite></a> protocol <a data-link-type="biblio" href="#biblio-events-query" title="HTTP Events Query">[EVENTS-QUERY]</a>.</p>
   <h3 class="heading settled" data-level="3.2" id="request-vocabulary"><span class="secno">3.2. </span><span class="content">Vocabulary</span><a class="self-link" href="#request-vocabulary"></a></h3>
   <p>The request data is expressed with the <a data-biblio-display="inline" data-link-type="biblio" href="https://www.w3.org/TR/HTTP-in-RDF10/"><cite>HTTP Vocabulary in RDF 1.0</cite></a> <a data-link-type="biblio" href="#biblio-http-in-rdf10" title="HTTP Vocabulary in RDF 1.0">[HTTP-in-RDF10]</a> and the <span class="title">Events Query with Linked Data</span> <a href="http://cxres.github.io/eq-ld/ns/eq.ttl">vocabulary</a>.</p>
   <p><span class="title">Events Query with Linked Data</span> defines the following RDF properties that a <a data-link-type="dfn" href="#client" id="ref-for-client②">client</a> MAY use in a request:</p>
   <dl>
    <dt id="request-property-events"><a class="self-link" href="#request-property-events"></a><code class="highlight"><em>eq-ld:events</em> &lt;http:headers></code> 
    <dd>Header fields to negotiate event notifications in an <span class="super">Events Query</span>. 
    <dt id="request-property-state"><a class="self-link" href="#request-property-state"></a><code class="highlight"><em>eq-ld:state</em> &lt;http:headers></code> 
    <dd>Header fields to negotiate the representation of resource state in an <span class="super">Events Query</span>. 
   </dl>
   <h3 class="heading settled" data-level="3.3" id="extended-request-content"><span class="secno">3.3. </span><span class="content">Extended Content</span><a class="self-link" href="#extended-request-content"></a></h3>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server④">server</a> MAY admit an extended request based on an augmented <a href="https://w3c.github.io/json-ld-syntax/#the-context">JSON-LD Context</a> <a data-link-type="biblio" href="#biblio-json-ld11" title="JSON-LD 1.1">[JSON-LD11]</a> definition.</p>
   <div class="advisement">
    <div class="marker">Implementation Guidance</div>
     <a data-link-type="dfn" href="#server" id="ref-for-server⑤">Servers</a> are encouraged to be aware that anything can be included in an <span class="super">Events Query</span> request. <a data-link-type="dfn" href="#server" id="ref-for-server⑥">Servers</a> are advised to take suitable precautions when processing request queries. 
   </div>
   <h3 class="heading settled" data-level="3.4" id="request-format"><span class="secno">3.4. </span><span class="content">Format</span><a class="self-link" href="#request-format"></a></h3>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server⑦">server</a> implementing <span class="title">Events Query with Linked Data</span> MUST accept a request using the <code class="highlight"><a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html#name-query">QUERY</a></code> method (<a data-link-type="biblio" href="#biblio-http-query" title="The HTTP QUERY Method">[HTTP-QUERY]</a> <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html#name-query">§ 2</a>) when the content-type of the request is <code class="highlight">application/ld+json</code> <a data-link-type="biblio" href="#biblio-json-ld11" title="JSON-LD 1.1">[JSON-LD11]</a>, and
includes <code class="highlight">http://cxres.github.io/eq-ld/ns/context.jsonld</code> as a URI for the JSON-LD context.</p>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server⑧">server</a> MAY support additional RDF representations for an <span class="super">Events Query</span>.</p>
   <div class="example" id="example-6e4f0b46">
    <a class="self-link" href="#example-6e4f0b46"></a> <span class="marker">Request for Event Notifications</span> 
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"><c- nf>QUERY</c-> <c- nn>/missing/John_Doe</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-></span><span class="line-no" data-line="2"></span><span class="line"><c- e>Host</c-><c- o>:</c-> <c- l>example.org</c-></span><span class="line-no" data-line="3"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="4"></span><span class="line"></span><span class="line-no" data-line="5"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="6"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"http://cxres.github.io/eq-ld/ns/context.jsonld"</c-><c- p>,</c-></span><span class="line-no" data-line="7"></span><span class="line">  <c- f>"eq-ld:events"</c-><c- p>:[</c-></span><span class="line-no" data-line="8"></span><span class="line">    <c- p>{</c-></span><span class="line-no" data-line="9"></span><span class="line">      <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:RequestHeader"</c-><c- p>,</c-></span><span class="line-no" data-line="10"></span><span class="line">      <c- f>"http:hdrName"</c-><c- p>:</c-><c- u>"http-headers:accept"</c-><c- p>,</c-></span><span class="line-no" data-line="11"></span><span class="line">      <c- f>"http:headerElements"</c-><c- p>:[</c-></span><span class="line-no" data-line="12"></span><span class="line">        <c- p>{</c-></span><span class="line-no" data-line="13"></span><span class="line">          <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:HeaderElement"</c-><c- p>,</c-></span><span class="line-no" data-line="14"></span><span class="line">          <c- f>"http:elementName"</c-><c- p>:</c-><c- u>"application/ld+json"</c-></span><span class="line-no" data-line="15"></span><span class="line">        <c- p>}</c-></span><span class="line-no" data-line="16"></span><span class="line">      <c- p>]</c-></span><span class="line-no" data-line="17"></span><span class="line">    <c- p>}</c-></span><span class="line-no" data-line="18"></span><span class="line">  <c- p>]</c-></span><span class="line-no" data-line="19"></span><span class="line"><c- p>}</c-></span><span class="line-no" data-line="20"></span><span class="line">ㅤ</span></pre>
   </div>
   <h2 class="heading settled" data-level="4" id="notification"><span class="secno">4. </span><span class="content">Notification</span><a class="self-link" href="#notification"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="notification-data-model"><span class="secno">4.1. </span><span class="content">Data Model</span><a class="self-link" href="#notification-data-model"></a></h3>
   <p>An <span class="title">Events Query with Linked Data</span> notification message specializes the <a href="https://w3c.github.io/activitystreams/core/#activities">Activity object</a> defined by <a data-biblio-display="inline" data-link-type="biblio" href="https://w3c.github.io/activitystreams/core/"><cite>Activity Streams 2.0</cite></a> <a data-link-type="biblio" href="#biblio-activitystreams-core" title="Activity Streams 2.0">[ACTIVITYSTREAMS-CORE]</a>.</p>
   <h3 class="heading settled" data-level="4.2" id="notification-vocabulary"><span class="secno">4.2. </span><span class="content">Vocabulary</span><a class="self-link" href="#notification-vocabulary"></a></h3>
   <p>The core notification data is expressed with the Activity Streams <a data-link-type="biblio" href="#biblio-activitystreams-vocabulary" title="Activity Vocabulary">vocabulary</a> <a data-link-type="biblio" href="#biblio-activitystreams-vocabulary" title="Activity Vocabulary">[ACTIVITYSTREAMS-VOCABULARY]</a>.</p>
   <p>An event notification transmitted using the <span class="title">Events Query with Linked Data</span> protocol MUST have the following properties:</p>
   <dl>
    <dt id="notification-property-type"><a class="self-link" href="#notification-property-type"></a><code class="highlight"><em>as:type</em> &lt;as:Activity></code> 
    <dd> the <a href="https://w3c.github.io/activitystreams/vocabulary/#activity-types">type of activity</a> that triggered the notification. 
    <dt id="notification-property-published"><a class="self-link" href="#notification-property-published"></a><code class="highlight"><em>as:published</em> &lt;xs:dateTime></code> 
    <dd> the date and time of the notification. 
   </dl>
   <h3 class="heading settled" data-level="4.3" id="activity-mapping"><span class="secno">4.3. </span><span class="content">Activity Mapping</span><a class="self-link" href="#activity-mapping"></a></h3>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server⑨">server</a> sending an event notification with the <span class="title">Events Query with Linked Data</span> protocol as a result of some activity on a resource MUST set the <a href="#notification-property-type">type</a> property as the <a href="https://w3c.github.io/activitystreams/vocabulary/#activity-types">type of activity</a> that triggered the notification as specified by the Activity Streams <a data-link-type="biblio" href="#biblio-activitystreams-vocabulary" title="Activity Vocabulary">vocabulary</a> <a data-link-type="biblio" href="#biblio-activitystreams-vocabulary" title="Activity Vocabulary">[ACTIVITYSTREAMS-VOCABULARY]</a>.</p>
   <h3 class="heading settled" data-level="4.4" id="extended-notification-content"><span class="secno">4.4. </span><span class="content">Extended Content</span><a class="self-link" href="#extended-notification-content"></a></h3>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server①⓪">server</a> MAY augment the <a href="https://w3c.github.io/json-ld-syntax/#the-context">JSON-LD Context</a> <a data-link-type="biblio" href="#biblio-json-ld11" title="JSON-LD 1.1">[JSON-LD11]</a> definition and extend the content of an event notification.</p>
   <p class="note" role="note"><span class="marker">NOTE:</span> See examples of <a href="https://w3c.github.io/activitystreams/core/#example-using-multiple-vocabularies">using multiple vocabularies</a> in the Activity Streams <a data-link-type="biblio" href="#biblio-activitystreams-core" title="Activity Streams 2.0">[ACTIVITYSTREAMS-CORE]</a> specification.</p>
   <div class="advisement">
    <div class="marker">Implementation Guidance</div>
     <a data-link-type="dfn" href="#client" id="ref-for-client③">Clients</a> are encouraged to be aware that anything can be included in an event notification. <a data-link-type="dfn" href="#client" id="ref-for-client④">Clients</a> are advised to take suitable precautions when ascertaining the veracity of the contents. 
   </div>
   <h3 class="heading settled" data-level="4.5" id="notification-format"><span class="secno">4.5. </span><span class="content">Format</span><a class="self-link" href="#notification-format"></a></h3>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server①①">server</a> implementing <span class="title">Events Query with Linked Data</span> on a resource MUST be able to transmit event notifications using the <code class="highlight">application/ld+json</code> <a data-link-type="biblio" href="#biblio-json-ld11" title="JSON-LD 1.1">[JSON-LD11]</a> media-type.</p>
   <p>A <a data-link-type="dfn" href="#server" id="ref-for-server①②">server</a> MAY additionally support other RDF serializations to transmit event notifications.</p>
   <div class="example" id="example-183e285e">
    <a class="self-link" href="#example-183e285e"></a> <span class="marker">An Event Notifications</span> 
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"></span><span class="line-no" data-line="2"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="3"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="4"></span><span class="line"><c- e>Content-Length</c-><c- o>:</c-> <c- l>180</c-></span><span class="line-no" data-line="5"></span><span class="line"></span><span class="line-no" data-line="6"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="7"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"https://www.w3.org/ns/activitystreams"</c-><c- p>,</c-></span><span class="line-no" data-line="8"></span><span class="line">  <c- f>"published"</c-><c- p>:</c-> <c- u>"2024-11-10T11:12:13Z"</c-><c- p>,</c-></span><span class="line-no" data-line="9"></span><span class="line">  <c- f>"type"</c-><c- p>:</c-> <c- u>"Update"</c-><c- p>,</c-></span><span class="line-no" data-line="10"></span><span class="line">  <c- f>"object"</c-><c- p>:</c-> <c- u>"https://example.org/missing/John_Doe"</c-></span><span class="line-no" data-line="11"></span><span class="line"><c- p>}</c-></span></pre>
   </div>
   <h2 class="no-num heading settled" id="considerations"><span class="content"> Considerations </span><a class="self-link" href="#considerations"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>References within this specification point to documents with a Living Standard or Draft status, meaning their contents can still change over time. It is advised to monitor these documents, as such changes might have implications.</p>
   <h3 class="heading settled" id="security-considerations"><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h3>
   <p><em>This section is non-normative.</em></p>
   <p>Since <span class="title">Events Query with Linked Data</span> uses <span class="super">Events Query</span> to transmit notifications, it follows that the <span class="title">Events Query with Linked Data</span> inherits security considerations from <span class="super">Events Query</span>, as discussed in <a data-link-type="biblio" href="#biblio-events-query" title="HTTP Events Query">[EVENTS-QUERY]</a> <a href="https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html#name-security-considerations">§ Security Considerations</a>.</p>
   <p><a data-link-type="dfn" href="#server" id="ref-for-server①③">Servers</a> are strongly discouraged from exposing information beyond the minimum amount necessary in a notification. <a data-link-type="dfn" href="#client" id="ref-for-client⑤">Clients</a> are strongly discouraged from exposing information beyond the minimum amount necessary to receive notifications from particular resources.</p>
   <p><a data-link-type="dfn" href="#client" id="ref-for-client⑥">Clients</a> are discouraged from sending requests for notifications to untrusted <a data-link-type="dfn" href="#server" id="ref-for-server①④">servers</a>, including localhost or any other loopback IP address, in order to avoid making arbitrary requests.</p>
   <h2 class="no-num heading settled" id="example"><span class="content"> Example </span><a class="self-link" href="#example"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>The following uses the example of a resource with a missing persons' report to illustrate the request and response for representation and event notifications using <span class="title">Events Query with Linked Data</span>.</p>
   <div class="example" id="example-9f922dbd">
    <a class="self-link" href="#example-9f922dbd"></a> <span class="marker"><span class="title">Events Query with Linked Data</span>: A Complete Example</span> 
    <p>The <a data-link-type="dfn" href="#client" id="ref-for-client⑦">client</a> specifies headers in both the <code class="highlight">eq-ld:state</code> and <code class="highlight">eq-ld:events</code> property of the <span class="super">Events Query</span> request:</p>
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"><c- nf>QUERY</c-> <c- nn>/missing/John_Doe</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-></span><span class="line-no" data-line="2"></span><span class="line"><c- e>Host</c-><c- o>:</c-> <c- l>example.org</c-></span><span class="line-no" data-line="3"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="4"></span><span class="line"></span><span class="line-no" data-line="5"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="6"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"http://cxres.github.io/eq-ld/ns/context.jsonld"</c-><c- p>,</c-></span><span class="line-no" data-line="7"></span><span class="line">  <c- f>"eq-ld:state"</c-><c- p>:[</c-></span><span class="line-no" data-line="8"></span><span class="line">    <c- p>{</c-></span><span class="line-no" data-line="9"></span><span class="line">      <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:RequestHeader"</c-><c- p>,</c-></span><span class="line-no" data-line="10"></span><span class="line">      <c- f>"http:hdrName"</c-><c- p>:</c-><c- u>"http-headers:accept"</c-><c- p>,</c-></span><span class="line-no" data-line="11"></span><span class="line">      <c- f>"http:headerElements"</c-><c- p>:[</c-></span><span class="line-no" data-line="12"></span><span class="line">        <c- p>{</c-></span><span class="line-no" data-line="13"></span><span class="line">          <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:HeaderElement"</c-><c- p>,</c-></span><span class="line-no" data-line="14"></span><span class="line">          <c- f>"http:elementName"</c-><c- p>:</c-><c- u>"text/html"</c-></span><span class="line-no" data-line="15"></span><span class="line">        <c- p>}</c-></span><span class="line-no" data-line="16"></span><span class="line">      <c- p>]</c-></span><span class="line-no" data-line="17"></span><span class="line">    <c- p>}</c-></span><span class="line-no" data-line="18"></span><span class="line">  <c- p>],</c-></span><span class="line-no" data-line="19"></span><span class="line">  <c- f>"eq-ld:events"</c-><c- p>:[</c-></span><span class="line-no" data-line="20"></span><span class="line">    <c- p>{</c-></span><span class="line-no" data-line="21"></span><span class="line">      <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:RequestHeader"</c-><c- p>,</c-></span><span class="line-no" data-line="22"></span><span class="line">      <c- f>"http:hdrName"</c-><c- p>:</c-><c- u>"http-headers:accept"</c-><c- p>,</c-></span><span class="line-no" data-line="23"></span><span class="line">      <c- f>"http:headerElements"</c-><c- p>:[</c-></span><span class="line-no" data-line="24"></span><span class="line">        <c- p>{</c-></span><span class="line-no" data-line="25"></span><span class="line">          <c- nd>"@type"</c-><c- p>:</c-><c- u>"http:HeaderElement"</c-><c- p>,</c-></span><span class="line-no" data-line="26"></span><span class="line">          <c- f>"http:elementName"</c-><c- p>:</c-><c- u>"application/ld+json"</c-></span><span class="line-no" data-line="27"></span><span class="line">        <c- p>}</c-></span><span class="line-no" data-line="28"></span><span class="line">      <c- p>]</c-></span><span class="line-no" data-line="29"></span><span class="line">    <c- p>}</c-></span><span class="line-no" data-line="30"></span><span class="line">  <c- p>]</c-></span><span class="line-no" data-line="31"></span><span class="line"><c- p>}</c->ㅤ</span></pre>
    <p>The <a data-link-type="dfn" href="#server" id="ref-for-server①⑤">server</a> immediately returns headers  indicating that the response shall transmit a stream of event notifications:</p>
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="1"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="2"></span><span class="line"><c- e>Accept-Query</c-><c- o>:</c-> <c- l>application/ld+json;</c-></span><span class="line-no" data-line="3"></span><span class="line">  <c- l>profile="http://www.w3.org/ns/json-ld#context http://cxres.github.io/eq-ld/ns/context.jsonld"</c-></span><span class="line-no" data-line="4"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/http</c-></span><span class="line-no" data-line="5"></span><span class="line"><c- e>Events</c-><c- o>:</c-> <c- l>duration=1200</c-></span><span class="line-no" data-line="6"></span><span class="line"><c- e>Incremental</c-><c- o>:</c-> <c- l>?1</c-></span></pre>
    <p>Following this, the <a data-link-type="dfn" href="#server" id="ref-for-server①⑥">server</a> returns the missing persons' report as the representation of the resource:</p>
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="7"></span><span class="line"></span><span class="line-no" data-line="8"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="9"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="10"></span><span class="line"><c- e>Content-Length</c-><c- o>:</c-> <c- l>139</c-></span><span class="line-no" data-line="11"></span><span class="line"></span><span class="line-no" data-line="12"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="13"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"https://json-ld.org/contexts/person.jsonld"</c-><c- p>,</c-></span><span class="line-no" data-line="14"></span><span class="line">  <c- nd>"@id"</c-><c- p>:</c-> <c- u>"http://dbpedia.org/resource/John_Doe"</c-><c- p>,</c-></span><span class="line-no" data-line="15"></span><span class="line">  <c- f>"name"</c-><c- p>:</c-> <c- u>"John Doe"</c-></span><span class="line-no" data-line="16"></span><span class="line"><c- p>}</c-></span></pre>
    <p>Subsequently, when status of the person is updated, the <a data-link-type="dfn" href="#server" id="ref-for-server①⑦">server</a> transmits an event notification:</p>
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="17"></span><span class="line"></span><span class="line-no" data-line="18"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="19"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="20"></span><span class="line"><c- e>Content-Length</c-><c- o>:</c-> <c- l>180</c-></span><span class="line-no" data-line="21"></span><span class="line"></span><span class="line-no" data-line="22"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="23"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"https://www.w3.org/ns/activitystreams"</c-><c- p>,</c-></span><span class="line-no" data-line="24"></span><span class="line">  <c- f>"published"</c-><c- p>:</c-> <c- u>"2024-11-10T11:12:13Z"</c-><c- p>,</c-></span><span class="line-no" data-line="25"></span><span class="line">  <c- f>"type"</c-><c- p>:</c-> <c- u>"Update"</c-><c- p>,</c-></span><span class="line-no" data-line="26"></span><span class="line">  <c- f>"object"</c-><c- p>:</c-> <c- u>"https://example.org/missing/John_Doe"</c-></span><span class="line-no" data-line="27"></span><span class="line"><c- p>}</c-></span></pre>
    <p>Finally, the person is found, so the resource is deleted, the <a data-link-type="dfn" href="#server" id="ref-for-server①⑧">server</a> emits an event notification and the stream closes:</p>
<pre class="include-code highlight line-numbered"><span class="line-no" data-line="28"></span><span class="line"></span><span class="line-no" data-line="29"></span><span class="line"><c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c-> <c- m>200</c-> <c- ne>OK</c-></span><span class="line-no" data-line="30"></span><span class="line"><c- e>Content-Type</c-><c- o>:</c-> <c- l>application/ld+json</c-></span><span class="line-no" data-line="31"></span><span class="line"><c- e>Content-Length</c-><c- o>:</c-> <c- l>180</c-></span><span class="line-no" data-line="32"></span><span class="line"></span><span class="line-no" data-line="33"></span><span class="line"><c- p>{</c-></span><span class="line-no" data-line="34"></span><span class="line">  <c- nd>"@context"</c-><c- p>:</c-> <c- u>"https://www.w3.org/ns/activitystreams"</c-><c- p>,</c-></span><span class="line-no" data-line="35"></span><span class="line">  <c- f>"published"</c-><c- p>:</c-> <c- u>"2024-11-10T14:15:16Z"</c-><c- p>,</c-></span><span class="line-no" data-line="36"></span><span class="line">  <c- f>"type"</c-><c- p>:</c-> <c- u>"Delete"</c-><c- p>,</c-></span><span class="line-no" data-line="37"></span><span class="line">  <c- f>"object"</c-><c- p>:</c-> <c- u>"https://example.org/missing/John_Doe"</c-></span><span class="line-no" data-line="38"></span><span class="line"><c- p>}</c-></span></pre>
   </div>
   <p> TEST 1 </p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-activitystreams-core">[ACTIVITYSTREAMS-CORE]
   <dd>James Snell; Evan Prodromou. <a href="https://w3c.github.io/activitystreams/core/"><cite>Activity Streams 2.0</cite></a>. URL: <a href="https://w3c.github.io/activitystreams/core/">https://w3c.github.io/activitystreams/core/</a>
   <dt id="biblio-activitystreams-vocabulary">[ACTIVITYSTREAMS-VOCABULARY]
   <dd>James Snell; Evan Prodromou. <a href="https://w3c.github.io/activitystreams/vocabulary/"><cite>Activity Vocabulary</cite></a>. URL: <a href="https://w3c.github.io/activitystreams/vocabulary/">https://w3c.github.io/activitystreams/vocabulary/</a>
   <dt id="biblio-events-query">[EVENTS-QUERY]
   <dd>Rahul Gupta. <a href="https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html"><cite>HTTP Events Query</cite></a>. URL: <a href="https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html">https://cxres.github.io/events-query/draft-gupta-httpapi-events-query.html</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-http-in-rdf10">[HTTP-in-RDF10]
   <dd>Johannes Koch; Carlos A. Velasco; Philip Ackermann. <a href="https://www.w3.org/TR/HTTP-in-RDF10/"><cite>HTTP Vocabulary in RDF 1.0</cite></a>. 2 February 2017. NOTE. URL: <a href="https://www.w3.org/TR/HTTP-in-RDF10/">https://www.w3.org/TR/HTTP-in-RDF10/</a>
   <dt id="biblio-http-query">[HTTP-QUERY]
   <dd>Julian Reschke; James M. Snell; Mike Bishop. <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html"><cite>The HTTP QUERY Method</cite></a>. Internet Draft. URL: <a href="https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html">https://httpwg.org/http-extensions/draft-ietf-httpbis-safe-method-w-body.html</a>
   <dt id="biblio-json-ld11">[JSON-LD11]
   <dd>Gregg Kellogg; Pierre-Antoine Champin; Dave Longley. <a href="https://w3c.github.io/json-ld-syntax/"><cite>JSON-LD 1.1</cite></a>. URL: <a href="https://w3c.github.io/json-ld-syntax/">https://w3c.github.io/json-ld-syntax/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-rfc8174">[RFC8174]
   <dd>B. Leiba. <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
   <dt id="biblio-rfc9110">[RFC9110]
   <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a href="https://httpwg.org/specs/rfc9110.html"><cite>HTTP Semantics</cite></a>. June 2022. Internet Standard. URL: <a href="https://httpwg.org/specs/rfc9110.html">https://httpwg.org/specs/rfc9110.html</a>
   <dt id="biblio-rfc9112">[RFC9112]
   <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a href="https://httpwg.org/specs/rfc9112.html"><cite>HTTP/1.1</cite></a>. June 2022. Internet Standard. URL: <a href="https://httpwg.org/specs/rfc9112.html">https://httpwg.org/specs/rfc9112.html</a>
   <dt id="biblio-spec-variability">[SPEC-VARIABILITY]
   <dd>Dominique Hazaël-Massieux; Lynne Rosenthal. <a href="https://www.w3.org/TR/spec-variability/"><cite>Variability in Specifications</cite></a>. 31 August 2005. NOTE. URL: <a href="https://www.w3.org/TR/spec-variability/">https://www.w3.org/TR/spec-variability/</a>
   <dt id="biblio-xmlschema11-1">[XMLSCHEMA11-1]
   <dd>Sandy Gao; et al. <a href="https://www.w3.org/TR/xmlschema11-1/"><cite>W3C XML Schema Definition Language (XSD) 1.1 Part 1: Structures</cite></a>. 5 April 2012. REC. URL: <a href="https://www.w3.org/TR/xmlschema11-1/">https://www.w3.org/TR/xmlschema11-1/</a>
  </dl>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"client": {"dfnID":"client","dfnText":"Client","external":false,"refSections":[{"refs":[{"id":"ref-for-client"}],"title":"1.3.4. Interoperability"},{"refs":[{"id":"ref-for-client\u2460"}],"title":"2. Discovery"},{"refs":[{"id":"ref-for-client\u2461"}],"title":"3.2. Vocabulary"},{"refs":[{"id":"ref-for-client\u2462"},{"id":"ref-for-client\u2463"}],"title":"4.4. Extended Content"},{"refs":[{"id":"ref-for-client\u2464"},{"id":"ref-for-client\u2465"}],"title":"Security Considerations"},{"refs":[{"id":"ref-for-client\u2466"}],"title":"\n  Example\n"}],"url":"#client"},
"client-server-interoperability": {"dfnID":"client-server-interoperability","dfnText":"Client\u2014Server Interoperability","external":false,"refSections":[{"refs":[{"id":"ref-for-client-server-interoperability"}],"title":"1.3.4. Interoperability"}],"url":"#client-server-interoperability"},
"server": {"dfnID":"server","dfnText":"Server","external":false,"refSections":[{"refs":[{"id":"ref-for-server"}],"title":"1.3.4. Interoperability"},{"refs":[{"id":"ref-for-server\u2460"},{"id":"ref-for-server\u2461"},{"id":"ref-for-server\u2462"}],"title":"2. Discovery"},{"refs":[{"id":"ref-for-server\u2463"},{"id":"ref-for-server\u2464"},{"id":"ref-for-server\u2465"}],"title":"3.3. Extended Content"},{"refs":[{"id":"ref-for-server\u2466"},{"id":"ref-for-server\u2467"}],"title":"3.4. Format"},{"refs":[{"id":"ref-for-server\u2468"}],"title":"4.3. Activity Mapping"},{"refs":[{"id":"ref-for-server\u2460\u24ea"}],"title":"4.4. Extended Content"},{"refs":[{"id":"ref-for-server\u2460\u2460"},{"id":"ref-for-server\u2460\u2461"}],"title":"4.5. Format"},{"refs":[{"id":"ref-for-server\u2460\u2462"},{"id":"ref-for-server\u2460\u2463"}],"title":"Security Considerations"},{"refs":[{"id":"ref-for-server\u2460\u2464"},{"id":"ref-for-server\u2460\u2465"},{"id":"ref-for-server\u2460\u2466"},{"id":"ref-for-server\u2460\u2467"}],"title":"\n  Example\n"}],"url":"#server"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#client": {"displayText":"client","export":true,"for_":[],"level":"","normative":true,"shortname":"eq-ld","spec":"eq-ld","status":"local","text":"client","type":"dfn","url":"#client"},
"#server": {"displayText":"server","export":true,"for_":[],"level":"","normative":true,"shortname":"eq-ld","spec":"eq-ld","status":"local","text":"server","type":"dfn","url":"#server"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>